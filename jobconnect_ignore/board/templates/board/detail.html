{% extends './base.html' %}
{% block main %}
  <div class="container">
    <h3>상세 페이지</h3>

    <!-- 기업 설명 -->
    <div class="my-5">
      <div class="my-2" style="display:flex; flex-direction:row;">
        <h5>{{ board.name }}</h5><div> | </div><h6> {{board.category}}</h6> <div> | </div> <h6> {{board.location}}</h6>
      </div>

      <div style="border:1px solid black; padding:2px; min-height:200px;">
        {{ board.description }}
      </div>

      <a href="{% url 'board:edit' board.id %}" class='btn btn-success'>
        수정
      </a>
      <a href="{% url 'board:delete' board.id %}" class='btn btn-primary'>삭제</a>
    </div>

    <!-- 댓글 작성 -->
    <div class="mv-4">
      <form action="" method="POST" style="display:flex; flex-direction:column;">
        {% csrf_token %}
        {% comment %} <input type="text" name="comment" id="" class='form-control'> {% endcomment %}
        {% for field in form %}
            <ul>
              {{ field }}
            </ul>
            <br>
        {% endfor %}
        <button type="submit" class="btn btn-primary" style="min-width:100px;">
          댓글작성
        </button>
      </form>

      {% for error in field.errors %}
        <div id="content-help" class="form-text text-danger">
          {{ field.errors }}
        </div>
      {% endfor %}

    </div>

    <!-- 댓글 불러오기 -->
    <div class="my-4">
      <ul class="list-group">
        {% for comment in page.object_list %}
          <li class="list-group-item">
            <h5>{{ comment.title }}</h5>
            <div>{{comment.job_category}} | {{comment.location}} | {{comment.status}}</div><br>
            <div>장점: {{comment.content_pros}}</div><br>
            <div>단점: {{comment.content_cons}}</div><br>
            <div>바라는 점: {{comment.content_hope}}</div><br>
            <div>총점: {{comment.star}}</div>
            <div>승진 기회 및 가능성: {{comment.star_1}}</div>
            <div>복지 및 급여: {{comment.star_2}}</div>
            <div>업무와 삶의 균형: {{comment.star_3}}</div>
            <div>사내문화: {{comment.star_4}}</div>
            <div>경영진: {{comment.star_5}}</div>
          </li>
        {% endfor %}
      </ul>
      <!-- 댓글 Pagination -->
      <div class="pagination">
        <span class="step-links">
            {% if page.has_previous %}
                <a href="?page=1">&laquo; first</a>
                <a href="?page={{ page.previous_page_number }}">previous</a>
            {% endif %}
            <span class="current">
                Page {{ page.number }} of {{ page.paginator.num_pages }}.
            </span>
            {% if page.has_next %}
                <a href="?page={{ page.next_page_number }}">next</a>
                <a href="?page={{ page.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
        <!-- Page Navigator 추가 -->
        <div class="mx-3">
            <label for="page_num">Go to page:</label>
            <input type="number" id="page_num" name="page_num" min="1" max="{{ page.paginator.num_pages }}">
            <button onclick="goToPage()">Go</button>
        </div>
      </div>

      <script>
        function goToPage() {
            // 페이지 번호 입력받기
            var pageNum = document.getElementById("page_num").value;
            
            // 페이지 이동
            window.location.href = "?page=" + pageNum;
        }
        </script>
    
    </div>
  </div>
{% endblock %}